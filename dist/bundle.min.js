!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.IRISWorm=e():t.IRISWorm=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var a=i[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var i={};return e.m=t,e.c=i,e.i=function(t){return t},e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},o=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),s=i(2),u=function(t){return t&&t.__esModule?t:{default:t}}(s),r=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n(this,t),this._rootDiv=e,this._options=a({},t.DEFAULT_OPTIONS,i),this._canvas=document.createElement("canvas"),this._canvas.width=this._options.width,this._canvas.height=this._options.height,this._canvas.className=this.CSS_CONTAINER,this._ctx=this._canvas.getContext("2d"),this._rootDiv.appendChild(this._canvas),this._value=50,this._metaValue=50,this._oldMetaValue=50,this._momentum=0,this._active=!1,"off"!==this._options.accessibilityBroadcast&&(this._fallbackDom=document.createElement("span"),this._fallbackDom.setAttribute("role","alert"),this._fallbackDom.setAttribute("aria-live",this._options.accessibilityBroadcast),this._fallbackDom.setAttribute("style","position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);"),this._rootDiv.appendChild(this._fallbackDom)),this._eventEmitter=new u.default}return o(t,[{key:"NAME",get:function(){"IRIS Worm"}},{key:"VERSION",get:function(){return null}},{key:"CSS_CONTAINER",get:function(){return"irisWorm"}},{key:"MAX_MOMENTUM",get:function(){return 5}}],[{key:"DEFAULT_OPTIONS",get:function(){return{width:600,height:400,maxValue:100,smoothMode:!0,colorMode:"greenIsGood",acceleration:.1,lineWidth:5,accessibilityBroadcast:"polite"}}}]),o(t,[{key:"start",value:function(){this._ctx.lineWidth=this._options.lineWidth,this._active=!0,this._draw()}},{key:"stop",value:function(){this._active=!1}},{key:"_draw",value:function(){this._active&&(requestAnimationFrame(this._draw.bind(this)),this._moveViewport(),this._drawPoint(),this._resolveValues())}},{key:"_resolveValues",value:function(){if(this._options.smoothMode){var t=Math.abs(this._value-this._metaValue);if(t<.1)return this._metaValue=this._value,void(this._momentum=0);this._value<this._metaValue&&this._momentum>=-this.MAX_MOMENTUM&&(this._momentum-=this._options.acceleration),this._value>this._metaValue&&this._momentum<=this.MAX_MOMENTUM&&(this._momentum+=this._options.acceleration),this._metaValue+=this._momentum*t/100,this._oldMetaValue=this._metaValue}else this._oldMetaValue=this._metaValue,this._metaValue=this._value}},{key:"_moveViewport",value:function(){var t=this._ctx.getImageData(1,0,this._options.width-1,this._options.height);this._ctx.putImageData(t,0,0),this._ctx.clearRect(this._options.width-1,0,1,this._options.height),t=null}},{key:"_drawPoint",value:function(){var t,e=255/this._options.height,i=Math.floor(e*this._scaleValue(this._metaValue)),n=255-Math.floor(e*this._scaleValue(this._metaValue));switch(this._options.colorMode){case"monochrome":t="rgb(0,0,0)";break;case"greenIsBad":t="rgb("+n+","+i+",0)";break;case"greenIsGood":default:t="rgb("+i+","+n+",0)"}this._ctx.strokeStyle=t,this._ctx.beginPath(),this._ctx.moveTo(this._options.width,this._scaleValue(this._metaValue)),this._ctx.lineTo(this._options.width-1,this._scaleValue(this._oldMetaValue)),this._ctx.stroke()}},{key:"_scaleValue",value:function(t){var e=this._options.height/this._options.maxValue;return this._options.height-t*e}},{key:"_getName",value:function(){var t=this.NAME;return 0!==this.VERSION.indexOf("<%=")&&(t=this.NAME+" "+this.VERSION),t}},{key:"destroy",value:function(){void 0!==this._canvas&&null!=this._canvas&&(this._canvas.remove(),delete this._canvas)}},{key:"on",value:function(t,e){var i=this;this._eventEmitter.on(t,function(t,n,a){return e.call(i,t,n,a)})}},{key:"setValue",value:function(t){t>this._options.maxValue&&(t=this._options.maxValue),"off"!==this._options.accessibilityBroadcast&&this._fallbackDom&&this._fallbackDom.remove&&(this._fallbackDom.remove(),this._fallbackDom.innerText="worm value is "+t,this._rootDiv.appendChild(this._fallbackDom)),t>this._value&&this._eventEmitter.emit("valueIncreased",this._value,t),t<this._value&&this._eventEmitter.emit("valueDecreased",this._value,t),t<=0&&this._eventEmitter.emit("valueBecameMinimum",this._value),t>=this._options.maxValue&&this._eventEmitter.emit("valueBecameMaximum",this._value),t<=0&&this._eventEmitter.emit("valueBecameMinimum",this._value),this._value=t,this._momentum=0,this._eventEmitter.emit("valueChanged",this._value)}},{key:"getValue",value:function(){return this._value}},{key:"setOption",value:function(t,e){this._options[t]=e}},{key:"getOption",value:function(t){return this._options[t]}}]),t}();e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Worm=void 0;var n=i(0),a=function(t){return t&&t.__esModule?t:{default:t}}(n);e.Worm=a.default},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(e){n(this,t),this._events={}}return a(t,[{key:"on",value:function(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)}},{key:"emit",value:function(t,e,i,n){(this._events[t]||[]).forEach(function(t){t&&t(e,i,n)})}}]),t}();e.default=o}])});
//# sourceMappingURL=bundle.min.js.map